{"version":3,"sources":["../../../Api/controllers/record.js"],"names":["Records","validate","method","check","body","exists","isLength","min","isString","isInt","CreateId","create","req","res","errorFormatter","location","msg","param","value","nestedErrors","errors","validationResult","formatWith","isEmpty","status","json","error","array","onlyFirstError","record","Record","title","type","id","comment","created_on","Date","created_by","image","data","x"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEA;AACA,IAAIA,UAAQ,EAAZ;AACA,IAAMC,WAAS,SAATA,QAAS,CAACC,MAAD,EAAY;AACvB,YAAQA,MAAR;AACI,aAAK,QAAL;AAAe;AACX,uBAAO,CACHC,gBAAMC,IAAN,CAAW,OAAX,EAAoB,yBAApB,EAA+CC,MAA/C,EADG,EAEHF,gBAAMC,IAAN,CAAW,OAAX,EAAoB,2CAApB,EAAiEE,QAAjE,CAA0E,EAAEC,KAAK,CAAP,EAA1E,CAFG,EAGHJ,gBAAMC,IAAN,CAAW,SAAX,EAAsB,6BAAtB,EAAqDC,MAArD,GAA8DC,QAA9D,CAAuE,EAAEC,KAAK,CAAP,EAAvE,CAHG,EAIHJ,gBAAMC,IAAN,CAAW,MAAX,EAAmB,6BAAnB,EAAkDC,MAAlD,GAA2DG,QAA3D,EAJG,EAKHL,gBAAMC,IAAN,CAAW,SAAX,EAAsB,2DAAtB,EAAmFC,MAAnF,GAA4FG,QAA5F,GAAuGF,QAAvG,CAAgH,EAAEC,KAAK,GAAP,EAAhH,CALG,EAMHJ,gBAAMC,IAAN,CAAW,YAAX,EAAyB,mBAAzB,EAA8CC,MAA9C,GAAuDI,KAAvD,EANG,EAOHN,gBAAMC,IAAN,CAAW,QAAX,EAAqB,8BAArB,EAAqDC,MAArD,GAA8DG,QAA9D,EAPG,CAAP;AASH;AACD;AAAS;AACL,uBAAO,EAAP;AACH;AAdL;AAgBH,CAjBD;;AAmBAE,WAAS,oBAAM,CAEd,CAFD;AAGA,IAAMC,SAAO,SAAPA,MAAO,CAACC,GAAD,EAAMC,GAAN,EAAc;AACvB,QAAMC,iBAAiB,SAAjBA,cAAiB,OAAmD;AAAA,YAAhDC,QAAgD,QAAhDA,QAAgD;AAAA,YAAtCC,GAAsC,QAAtCA,GAAsC;AAAA,YAAjCC,KAAiC,QAAjCA,KAAiC;AAAA,YAA1BC,KAA0B,QAA1BA,KAA0B;AAAA,YAAnBC,YAAmB,QAAnBA,YAAmB;;AACtE,eAAOH,GAAP;AACD,KAFH;AAGA,QAAII,SAAOjB,gBAAMkB,gBAAN,CAAuBT,GAAvB,EAA4BU,UAA5B,CAAuCR,cAAvC,CAAX;AACA,QAAI,CAACM,OAAOG,OAAP,EAAL,EAAuB;AACnB,eAAOV,IAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAED,QAAQ,GAAV,EAAeE,OAAON,OAAOO,KAAP,CAAa,EAAEC,gBAAgB,IAAlB,EAAb,CAAtB,EAArB,CAAP;AACH;AACD,QAAIC,SAAOC,gBAAX;AACAD,WAAOE,KAAP,GAAanB,IAAIR,IAAJ,CAAS2B,KAAtB;AACAF,WAAOG,IAAP,GAAYpB,IAAIR,IAAJ,CAAS4B,IAArB;AACAH,WAAOI,EAAP,GAAWvB,UAAX;AACAmB,WAAOK,OAAP,GAAgBtB,IAAIR,IAAJ,CAAS8B,OAAzB;AACAL,WAAOM,UAAP,GAAmB,IAAIC,IAAJ,EAAnB;AACAP,WAAOQ,UAAP,GAAmBzB,IAAIR,IAAJ,CAASiC,UAA5B;AACAR,WAAOS,KAAP,GAAc1B,IAAIR,IAAJ,CAASkC,KAAvB;AACAT,WAAOd,QAAP,GAAiBH,IAAIR,IAAJ,CAASW,QAA1B;AACAc,WAAOL,MAAP,GAAeZ,IAAIR,IAAJ,CAASoB,MAAxB;AACA,WAAOX,IAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAED,QAAQ,GAAV,EAAee,MAAM,CAACC,CAAD,CAArB,EAArB,CAAP;AACH,CAnBD;;QAqBSvC,Q,GAAAA,Q;QAAUU,M,GAAAA,M","file":"record.js","sourcesContent":["import check from 'express-validator/check';\r\nimport Record from '../models/Record';\r\n\r\n// temporary in memory storage\r\nlet Records=[];\r\nconst validate=(method) => {\r\n    switch (method) {\r\n        case 'create': {\r\n            return [\r\n                check.body('title', 'a valid title is needed').exists(),\r\n                check.body('title', 'Title is too short, at least 5 characters').isLength({ min: 5 }),\r\n                check.body('comment', 'a valid comment is required').exists().isLength({ min: 5 }),\r\n                check.body('type', 'You need to selected a type').exists().isString(),\r\n                check.body('comment', 'You need to add a valid comment (At least 300 characters)').exists().isString().isLength({ min: 300 }),\r\n                check.body('created_by', 'User Id is needed').exists().isInt(),\r\n                check.body('status', 'A defualt status is required').exists().isString(),\r\n            ];\r\n        }\r\n        default: {\r\n            return [];\r\n        }\r\n    }\r\n};\r\n\r\nCreateId=() => {\r\n\r\n};\r\nconst create=(req, res) => {\r\n    const errorFormatter = ({ location, msg, param, value, nestedErrors }) => {\r\n        return msg;\r\n      };\r\n    let errors=check.validationResult(req).formatWith(errorFormatter);\r\n    if (!errors.isEmpty()) {\r\n        return res.status(404).json({ status: 404, error: errors.array({ onlyFirstError: true }) });\r\n    }\r\n    let record=Record;\r\n    record.title=req.body.title;\r\n    record.type=req.body.type;\r\n    record.id= CreateId();\r\n    record.comment= req.body.comment;\r\n    record.created_on= new Date();\r\n    record.created_by= req.body.created_by;\r\n    record.image= req.body.image;\r\n    record.location= req.body.location;\r\n    record.status= req.body.status;\r\n    return res.status(200).json({ status: 200, data: [x] });\r\n};\r\n\r\nexport { validate, create };\r\n"]}